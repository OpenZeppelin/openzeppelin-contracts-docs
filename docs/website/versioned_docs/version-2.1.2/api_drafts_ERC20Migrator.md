---
id: version-2.1.2-drafts_ERC20Migrator
title: ERC20Migrator
original_id: drafts_ERC20Migrator
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> ERC20Migrator</h2><p class="description">This contract can be used to migrate an ERC20 token from one contract to another, where each token holder has to opt-in to the migration. To opt-in, users must approve for this contract the number of tokens they want to migrate. Once the allowance is set up, anyone can trigger the migration to the new token contract. In this way, token holders &quot;turn in&quot; their old balance and will be minted an equal amount in the new token. The new token contract must be mintable. For the precise interface refer to OpenZeppelin&#x27;s ERC20Mintable, but the only functions that are needed are `isMinter(address)` and `mint(address, amount)`. The migrator will check that it is a minter for the token. The balance from the legacy token will be transfered to the migrator, as it is migrated, and remain there forever. Although this contract can be used in many different scenarios, the main motivation was to provide a way to migrate ERC20 tokens into an upgradeable version of it using ZeppelinOS. To read more about how this can be done using this implementation, please follow the official documentation site of ZeppelinOS: https://docs.zeppelinos.org/docs/erc20_onboarding.html Example of usage: ``` const migrator = await ERC20Migrator.new(legacyToken.address); await newToken.addMinter(migrator.address); await migrator.beginMigration(newToken.address); ```.</p><div class="source">Source: <a href="https://github.com/OpenZeppelin/zeppelin-solidity/blob/v2.1.2/contracts/drafts/ERC20Migrator.sol" target="_blank">drafts/ERC20Migrator.sol</a></div></div><div class="index"><h2>Index</h2><ul><li><a href="drafts_ERC20Migrator.html#beginMigration">beginMigration</a></li><li><a href="drafts_ERC20Migrator.html#">fallback</a></li><li><a href="drafts_ERC20Migrator.html#legacyToken">legacyToken</a></li><li><a href="drafts_ERC20Migrator.html#migrate">migrate</a></li><li><a href="drafts_ERC20Migrator.html#migrateAll">migrateAll</a></li><li><a href="drafts_ERC20Migrator.html#newToken">newToken</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="beginMigration" class="anchor-marker"></span><h4 class="name">beginMigration</h4><div class="body"><code class="signature">function <strong>beginMigration</strong><span>(ERC20Mintable newToken) </span><span>public </span></code><hr/><div class="description"><p>Begins the migration by setting which is the new token that will be minted. This contract must be a minter for the new token.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>newToken</code> - the token that will be minted</div></dd></dl></div></div></li><li><div class="item function"><span id="fallback" class="anchor-marker"></span><h4 class="name">fallback</h4><div class="body"><code class="signature">function <strong></strong><span>(IERC20 legacyToken) </span><span>public </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>legacyToken</code> - address of the old token contract</div></dd></dl></div></div></li><li><div class="item function"><span id="legacyToken" class="anchor-marker"></span><h4 class="name">legacyToken</h4><div class="body"><code class="signature">function <strong>legacyToken</strong><span>() </span><span>public </span><span>view </span><span>returns  (IERC20) </span></code><hr/><div class="description"><p>Returns the legacy token that is being migrated.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>IERC20</dd></dl></div></div></li><li><div class="item function"><span id="migrate" class="anchor-marker"></span><h4 class="name">migrate</h4><div class="body"><code class="signature">function <strong>migrate</strong><span>(address account, uint256 amount) </span><span>public </span></code><hr/><div class="description"><p>Transfers part of an account&#x27;s balance in the old token to this contract, and mints the same amount of new tokens for that account.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>account</code> - whose tokens will be migrated</div><div><code>amount</code> - amount of tokens to be migrated</div></dd></dl></div></div></li><li><div class="item function"><span id="migrateAll" class="anchor-marker"></span><h4 class="name">migrateAll</h4><div class="body"><code class="signature">function <strong>migrateAll</strong><span>(address account) </span><span>public </span></code><hr/><div class="description"><p>Transfers all of an account&#x27;s allowed balance in the old token to this contract, and mints the same amount of new tokens for that account.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>account</code> - whose tokens will be migrated</div></dd></dl></div></div></li><li><div class="item function"><span id="newToken" class="anchor-marker"></span><h4 class="name">newToken</h4><div class="body"><code class="signature">function <strong>newToken</strong><span>() </span><span>public </span><span>view </span><span>returns  (IERC20) </span></code><hr/><div class="description"><p>Returns the new token to which we are migrating.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>IERC20</dd></dl></div></div></li></ul></div></div></div>
